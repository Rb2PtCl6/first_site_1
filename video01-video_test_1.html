<!DOCTYPE HTML>
<html lang="en">

<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <title>Dynamic size (player)</title>
  <link rel="icon" href="./video01/ico92x92.png" type="image/png">
  <script src="./video01/js1/current-device.min.js"></script>
  <!--<script src="./js1/playerjs(no_pl).js"></script>-->
  <!--<script src="./video01/js1/playerjs-pleer-13-t10-16.6nwpn.js"></script>-->
  <script src="./video01/js1/playerjs-pleer-13-t10-ael-yes16.10.js"></script>
  <script src="./js/jquery-3.6.0.min.js"></script>
  <script src="./video01/js1/jquery-ui.min.js"></script>
  <link rel="stylesheet" href="./video01/css/jquery-ui.min.css">
  <style>
    body,
    html {
      padding: 0;
      margin: 0;
    }

    body{
      width: 100vw;
      height: 100vh;
      border: 0px;
      overflow: hidden;
    }

    .box{
      width: 100%;
      height: 100%;
      padding: 0;
      margin: 0;
    }

    .center{
      display: flex;
      align-items: center;
      justify-content: center;
    }

    div.text1 {
      font-family: Arial, Helvetica, sans-serif;
      font-size: 1.2em;
      margin-bottom: 10px;
      text-align: center;
      padding: 5px;
    }

    div.inp1 {
      margin-top: 10px;
      border: 0px;
      text-align: left;
    }

    div.inp1 input {
      margin: 3px;
    }

    div.part1 {
      font-family: Arial, Helvetica, sans-serif;
      font-size: 1em;
      margin: 5px;
      text-align: center
    }

    div.part2 {
      margin: 3px;
      text-align: center
    }

    .player1 {
      width: 100%;
    }

    .ui-widget-header{
      font-weight: normal
    }
  </style>
</head>

<body class="ui-widget-content">
  <div class="center box">
    <div class="main">
      <div class="inp1 ui-widget-header ui-corner-top">
        <input type="button" value="Opening 1" id="but1" class="inp first_i">
        <input type="button" value="Opening 2" id="but2" class="inp first_i">
        <input type="button" value="Opening 3" id="but3" class="inp first_i">
        <input type="button" value="Ending 3" id="but4" class="inp second_i">
        <input type="button" value="AHIH" id="but5" class="inp second_i">
        <input type="button" value="Wedding March" id="but6" class="inp second_i">
      </div>
      <div id="player1" class="player1"></div>
      <div class="text1 ui-widget-header ui-corner-bottom"></div>
      <div class="center">
        <div class="text2 ui-widget-header ui-corner-all">
          <div class="part1">Текущее cостояние автозапуска / Выбранный набор видео / Автозапуск следущего видео / Loop 1
            video</div>
          <div class="part2">
            <input type="button" value="Отключено" class="but but10">
            <input type="button" class="but" disabled value="/">
            <input type="button" value="1" class=" but but11">
            <input type="button" class="but" disabled value="/">
            <input type="button" value="Отключено" class=" but but12">
            <input type="button" class="but" disabled value="/">
            <input type="button" value="0" class=" but but13">
          </div>
        </div>
      </div>
    </div>
  </div>
  <script>
    var storage = [
      {
        displayed_name: "『デート・ア・ライブ』 オープニング映像｜10周年記念！シリーズＯＰ映像リバイバル配信！",
        filename: "d22aa92e-4fb9-4ff2-988e-cba9325a7844"
      },
      {
        displayed_name: "『デート・ア・ライブⅡ』 オープニング映像｜10周年記念！シリーズＯＰ映像リバイバル配信！",
        filename: "7b05015e-0409-4da5-98e1-bec8048e2dbb"
      },
      {
        displayed_name: "『デート・ア・ライブⅢ』 オープニング映像｜10周年記念！シリーズＯＰ映像リバイバル配信！",
        filename: "e94da1c9-5f45-4564-8372-44a06bd96eed"
      },
      {
        displayed_name: "Date A Live III - Ending｜Last Promise",
        filename: "a318ecf1-62f5-41b8-831e-75fa913651a0"
      },
      {
        displayed_name: "Date A Live Season 3 OST - AHIH (Origami Battle Theme)",
        filename: "4673715e-ac01-4c9e-a49d-827167e32783"
      },
      {
        displayed_name: "Date A Live Season 3 OST - Wedding March (Origami Theme)",
        filename: "a7964897-4212-43b6-8c4b-1b8d560285c2"
      }
	]
  var fileslist = [];
  storage.forEach(function(obj, index){
    fileslist.push({
      file: `./video01/video/${obj.filename}.mp4`,
      poster: `./video01/images/image${index + 1}.png`,
      id: `v${index+1}`
    })
  })
  console.table(fileslist)
    var player = new Playerjs({
      id: "player1", file: fileslist
    });
    player.api('volume', 0.8);
    player.api('find', 'v1');
    jQuery(function () {
      // main
      var ww = document.documentElement.clientWidth;
      var hh = document.documentElement.clientHeight;
      $('input[type=button].inp').button();
      $('input[type=button].but').button();
      // $('div.inp1').addClass('ui-corner-top');
      $('div.text1').append(storage[0].displayed_name);
      // adaptable player size
      if ($('html').hasClass('mobile') || $('html').hasClass('tablet')) {
        $('div.main').width(ww * 0.995);
        $('div.text2').width(ww * 0.8);
      }
      else {
        $('div.main').width(ww * 0.6);
        $('div.text2').width((ww * 0.6) - 2);
      };
      // autolaunch
      var n_text = 'preload'
      $('input.but10').click(function () {
        if (n_text == 'preload') {
          n_text = 'play';
          $('input.but10').attr('value', 'Включено');
        }
        else {
          n_text = 'preload';
          $('input.but10').attr('value', 'Отключено');
        };
      });
      // video collections
      $('input.second_i').hide();
      var vid_col = 0;
      $('input.but11').click(function () {
        if (vid_col == 0) {
          $('input.but11').attr('value', '2');
          $('input.first_i').hide();
          $('input.second_i').show();
          vid_col = 1;
        }
        else {
          $('input.but11').attr('value', '1');
          $('input.second_i').hide();
          $('input.first_i').show();
          vid_col = 0;
        }
      });
      // click on input
      $('input.inp').click(function () {
        var ind = $('div.inp1 input.inp').index(this);
        if (player.api('playlist_id') == 'v' + (ind + 1)) return;
        player.api('find', 'v' + (ind + 1));
        player.api(n_text);
        $('div.text1').empty().append(storage[ind].displayed_name);
      });
      // looped 1 video
      var loop_stat_0 = 0;
      $('input.but13').click(function () {
        if (loop_stat == 1) { // avoid problems 1
          loop_stat = 0;
          player.api('autonext', 0);
          player.api('playlistloop', 0);
          $('input.but12').attr('value', 'Отключено');
        }
        if (loop_stat_0 == 0) {
          $('input.but13').attr('value', '1');
          loop_stat_0 = 1;
        }
        else {
          $('input.but13').attr('value', '0');
          loop_stat_0 = 0;
        }
        player.api('loop', loop_stat_0);
      });
      // looped all videos
      var loop_stat = 0;
      player.api('autonext', 0);
      player.api('playlistloop', 0);
      $('input.but12').click(function () {
        if (loop_stat_0 == 1) { // avoid problems 0
          loop_stat_0 = 0;
          player.api('loop', '0');
          $('input.but13').attr('value', '0');
        }
        if (loop_stat == 0) {
          $('input.but12').attr('value', 'Включено');
          loop_stat = 1;
        }
        else {
          $('input.but12').attr('value', 'Отключено');
          loop_stat = 0;
        }
        player.api('autonext', loop_stat);
        player.api('playlistloop', loop_stat);
      })
      var stat;
      var stat1;
      $('div#player1').on('new', function () {
        stat = player.api('playlist_id');
        stat1 = stat.slice(1);
        $('div.text1').empty().append(storage[stat1 - 1].displayed_name);
      })
      // player.api('volume',0);
    })
  </script>
</body>

</html>